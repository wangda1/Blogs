# multiple definition

重复定义问题，以前没有注意到这个问题，觉得会有这种影响吗？不还是有
```
#ifndefine
#define

#endif
```
这就大错特错了，为什么呢？因为这涉及到**重复定义**与**重复包含**问题

## 重复包含(multiple include)

这里指的是在编译阶段进行宏展开时，为了避免重复包含某个头文件，而采取的 define方法

**场景**

*****************************test1.h***********************************
```

...
int a = 1;
char a[]="Hello world";
```
*****************************test2.h***********************************
```
#include "test1.h"

...
int b = 1;
int c = 2;
```
*****************************test.cpp**********************************
```
#include "test1.h"
#include "test2.h"

...

```
编译阶段进行宏展开时会报错，重复包含了！！！

## 重复定义(multiple definition)
**场景**
*****************************test1.h***********************************
```
#ifnfine ...
#define ...
int a = 1;
char a[]="Hello world";

#endif
```
*****************************test2.h***********************************
```
#ifndefine ...
#define ...

#include "test1.h"

int b = 1;
int c = 2;

#endif
```
*****************************test.cpp**********************************
```
#include "test1.h"
#include "test2.h"

...

```
会报出重复定义错误  
原因：
```
工程中的.cpp文件都是独立解释的，每份.cpp文件解释后会生成一份符号表（编译之后），但在链接时因为每份符号表都有定义就出现了
重复定义的情况
```

## 解决方法

1.当我们需要一份常量头文件时，如   

********************global.h*****************************
```
#ifndefine GLOBAL_H_
#define GLOBAL_H_

Pi = 3.1415926;

#endif
```

可以：
```
在.c文件中声明变量，然后建一个头文件(.h文件)在所有的变量声明前加上extern，注意这里不要对变量进行的初始化。
然后在其他需要使用全局变量的.c文件中包含.h文件。编译器会为.c生成目标文件，然后链接时，如果该.c文件使用了全局变量，链接器就会链接到此.c文件
```

2.当函数设置成内嵌 inline 时，也不会出现重复定义，不过一般不建议这样做

















